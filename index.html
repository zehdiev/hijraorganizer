<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Хиджра Календар Органайзър</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        /* Допълнителни стилове, ако е необходимо */
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useCallback } = React;

        // Помощна функция за преобразуване на хиджри дата в григорианска (опростено приближение)
        // Това е опростено преобразуване и може да не е напълно точно за всички дати
        // поради сложността на лунния календар и различните методи на изчисление.
        // За приложение от производствен клас би се препоръчала надеждна библиотека за хиджри календар.
        const hijriToGregorian = (hijriYear, hijriMonth, hijriDay) => {
            // Нова референтна точка: 6 Зилхидже 1446 г. по Хиджра е 2 юни 2025 г. от н.е.
            const REFERENCE_HIJRI_YEAR = 1446;
            const REFERENCE_HIJRI_MONTH = 12; // Зилхидже
            const REFERENCE_HIJRI_DAY = 6;
            const REFERENCE_GREGORIAN_DATE = new Date(2025, 5, 2); // 2 юни 2025 г. (месецът е базиран на 0-индекс)

            const AVG_LUNAR_MONTH_DAYS = 29.53; // Средна продължителност на лунен месец в дни

            let daysDiff = 0;

            // Изчисляване на разликата в дните от новата референтна точка
            // Първо, коригиране за разлика в годините
            daysDiff += (hijriYear - REFERENCE_HIJRI_YEAR) * (12 * AVG_LUNAR_MONTH_DAYS);

            // След това, коригиране за разлика в месеците
            if (hijriMonth < REFERENCE_HIJRI_MONTH) {
                for (let m = REFERENCE_HIJRI_MONTH - 1; m >= hijriMonth; m--) {
                    daysDiff -= getDaysInHijriMonth(hijriYear, m); // По-точно изчисление на дните в месеца
                }
            } else if (hijriMonth > REFERENCE_HIJRI_MONTH) {
                for (let m = REFERENCE_HIJRI_MONTH; m < hijriMonth; m++) {
                    daysDiff += getDaysInHijriMonth(hijriYear, m); // По-точно изчисление на дните в месеца
                }
            }

            // Накрая, коригиране за разлика в дните в рамките на месеца
            daysDiff += (hijriDay - REFERENCE_HIJRI_DAY);

            const gregorianDate = new Date(REFERENCE_GREGORIAN_DATE);
            gregorianDate.setDate(REFERENCE_GREGORIAN_DATE.getDate() + daysDiff);

            return gregorianDate;
        };

        // Имена на хиджри месеците на български
        const hijriMonths = [
            "Мухаррем", "Сафер", "Рабиюлеввел", "Рабиюлахир", "Джемазиюлеввел",
            "Джемазиюлахир", "Реджеб", "Шабан", "Рамазан", "Шеввал",
            "Зилкаде", "Зилхидже"
        ];

        // Функция за получаване на броя дни в хиджри месец (опростено приближение)
        // В действителност, хиджри месеците редуват 29 и 30 дни въз основа на наблюдението на луната.
        // Тази функция използва фиксиран модел за демонстрация.
        const getDaysInHijriMonth = (hijriYear, hijriMonth) => {
            // Опропен модел: нечетни месеци 30 дни, четни месеци 29 дни, Зул-Хиджа може да е 29 или 30
            if (hijriMonth % 2 !== 0) { // Нечетни месеци (Мухаррем, Рабиюлеввел и т.н.)
                return 30;
            } else if (hijriMonth === 12) { // Зилхидже
                // В реален календар това зависи от годината (високосна година за Хиджра)
                // За простота, ще го направим 29 дни, или 30 за високосни години (което не е изчислено тук)
                return 29; // Или 30 във високосна година, не е имплементирано тук
            } else { // Четни месеци
                return 29;
            }
        };

        // Helper to parse date strings like "7 Jan 01:56" into Date objects
        const parseMoonPhaseDate = (dateString, year) => {
            if (!dateString) return null;
            // Append the year to make it a valid date string for parsing by Date constructor
            // The Date constructor will parse this in the local timezone of the browser.
            return new Date(`${dateString} ${year}`);
        };

        // ХАРДКОДНАТИ ДАННИ ЗА ЛУННИТЕ ФАЗИ ЗА 2025 И 2026 ГРИГОРИАНСКА
        // Формат: 'ГГГГ-ММ-ДД': 'Символ'
        // Месеците са 0-индексирани в JavaScript Date обекта, но ключовете са 1-индексирани за яснота
        const hardcodedMoonPhases = {};

        // Данни за 2025 г.
        const moonData2025 = [
            { "id": 1262, "new_moon": null, "first_quarter": "7 Jan 01:56", "full_moon": "14 Jan 00:26", "third_quarter": "21 Jan 22:30", "duration": "29 14 09" },
            { "id": 1263, "new_moon": "29 Jan 14:35", "first_quarter": "5 Feb 10:02", "full_moon": "12 Feb 15:53", "third_quarter": "20 Feb 19:32", "duration": "29 12 09" },
            { "id": 1264, "new_moon": "28 Feb 02:44", "first_quarter": "6 Mar 18:31", "full_moon": "14 Mar 08:54", "third_quarter": "22 Mar 13:29", "duration": "29 10 13" },
            { "id": 1265, "new_moon": "29 Mar 12:57", "first_quarter": "5 Apr 05:14", "full_moon": "13 Apr 03:22", "third_quarter": "21 Apr 04:35", "duration": "29 08 33" },
            { "id": 1266, "new_moon": "27 Apr 22:31", "first_quarter": "4 May 16:51", "full_moon": "12 May 19:55", "third_quarter": "20 May 14:58", "duration": "29 07 31" },
            { "id": 1267, "new_moon": "27 May 06:02", "first_quarter": "3 Jun 06:40", "full_moon": "11 Jun 10:43", "third_quarter": "18 Jun 22:19", "duration": "29 07 29" },
            { "id": 1268, "new_moon": "25 Jun 13:31", "first_quarter": "2 Jul 22:30", "full_moon": "10 Jul 23:36", "third_quarter": "18 Jul 03:37", "duration": "29 08 40" },
            { "id": 1269, "new_moon": "24 Jul 22:11", "first_quarter": "1 Aug 15:41", "full_moon": "9 Aug 10:54", "third_quarter": "16 Aug 08:12", "duration": "29 10 55" },
            { "id": 1270, "new_moon": "23 Aug 09:06", "first_quarter": "31 Aug 09:25", "full_moon": "7 Sep 21:08", "third_quarter": "14 Sep 13:32", "duration": "29 13 48" },
            { "id": 1271, "new_moon": "21 Sep 22:54", "first_quarter": "30 Sep 02:53", "full_moon": "7 Oct 06:47", "third_quarter": "13 Oct 21:12", "duration": "29 16 31" },
            { "id": 1272, "new_moon": "21 Oct 15:25", "first_quarter": "29 Oct 18:20", "full_moon": "5 Nov 15:19", "third_quarter": "12 Nov 07:28", "duration": "29 18 22" },
            { "id": 1273, "new_moon": "20 Nov 08:47", "first_quarter": "28 Nov 08:58", "full_moon": "5 Dec 01:14", "third_quarter": "11 Dec 22:51", "duration": "29 18 56" },
            { "id": 1274, "new_moon": "20 Dec 03:43", "first_quarter": "27 Dec 21:09", "full_moon": null, "third_quarter": null, "duration": "29 18 09" }
        ];

        // Данни за 2026 г.
        const moonData2026 = [
            { "id": 1274, "new_moon": null, "first_quarter": null, "full_moon": "3 Jan 12:02", "third_quarter": "10 Jan 17:48", "duration": "29 18 09" },
            { "id": 1275, "new_moon": "18 Jan 21:51", "first_quarter": "26 Jan 06:47", "full_moon": "2 Feb 00:09", "third_quarter": "9 Feb 14:43", "duration": "29 16 09" },
            { "id": 1276, "new_moon": "17 Feb 14:01", "first_quarter": "24 Feb 14:27", "full_moon": "3 Mar 13:37", "third_quarter": "11 Mar 11:38", "duration": "29 13 22" },
            { "id": 1277, "new_moon": "19 Mar 03:23", "first_quarter": "25 Mar 21:17", "full_moon": "2 Apr 05:11", "third_quarter": "10 Apr 07:51", "duration": "29 10 28" },
            { "id": 1278, "new_moon": "17 Apr 14:51", "first_quarter": "24 Apr 05:31", "full_moon": "1 May 20:23", "third_quarter": "10 May 00:10", "duration": "29 08 09" },
            { "id": 1279, "new_moon": "16 May 23:01", "first_quarter": "23 May 14:10", "full_moon": "31 May 11:45", "third_quarter": "8 Jun 13:00", "duration": "29 06 53" },
            { "id": 1280, "new_moon": "15 Jun 05:54", "first_quarter": "22 Jun 00:55", "full_moon": "30 Jun 02:56", "third_quarter": "7 Jul 22:29", "duration": "29 06 50" },
            { "id": 1281, "new_moon": "14 Jul 12:43", "first_quarter": "21 Jul 14:05", "full_moon": "29 Jul 17:35", "third_quarter": "6 Aug 05:21", "duration": "29 07 53" },
            { "id": 1282, "new_moon": "12 Aug 20:36", "first_quarter": "20 Aug 05:46", "full_moon": "28 Aug 07:18", "third_quarter": "4 Sep 10:51", "duration": "29 09 50" },
            { "id": 1283, "new_moon": "11 Sep 06:26", "first_quarter": "18 Sep 23:43", "full_moon": "26 Sep 19:49", "third_quarter": "3 Oct 16:25", "duration": "29 12 23" },
            { "id": 1284, "new_moon": "10 Oct 18:50", "first_quarter": "18 Oct 19:12", "full_moon": "26 Oct 06:11", "third_quarter": "1 Nov 22:28", "duration": "29 15 12" },
            { "id": 1285, "new_moon": "9 Nov 09:02", "first_quarter": "17 Nov 13:47", "full_moon": "24 Nov 16:53", "third_quarter": "1 Dec 08:08", "duration": "29 17 50" },
            { "id": 1286, "new_moon": "9 Dec 02:51", "first_quarter": "17 Dec 07:42", "full_moon": "24 Dec 03:28", "third_quarter": "30 Dec 20:59", "duration": "29 19 33" }
        ];

        // Функция за попълване на hardcodedMoonPhases обекта
        const populateMoonPhases = (data, year) => {
            data.forEach(monthData => {
                // New Moon
                const newMoonDate = parseMoonPhaseDate(monthData.new_moon, year);
                if (newMoonDate) {
                    const key = `${newMoonDate.getFullYear()}-${(newMoonDate.getMonth() + 1).toString().padStart(2, '0')}-${newMoonDate.getDate().toString().padStart(2, '0')}`;
                    hardcodedMoonPhases[key] = '🌑︎';
                }

                // First Quarter
                const firstQuarterDate = parseMoonPhaseDate(monthData.first_quarter, year);
                if (firstQuarterDate) {
                    const key = `${firstQuarterDate.getFullYear()}-${(firstQuarterDate.getMonth() + 1).toString().padStart(2, '0')}-${firstQuarterDate.getDate().toString().padStart(2, '0')}`;
                    hardcodedMoonPhases[key] = '🌓︎';
                }

                // Full Moon
                const fullMoonDate = parseMoonPhaseDate(monthData.full_moon, year);
                if (fullMoonDate) {
                    const key = `${fullMoonDate.getFullYear()}-${(fullMoonDate.getMonth() + 1).toString().padStart(2, '0')}-${fullMoonDate.getDate().toString().padStart(2, '0')}`;
                    hardcodedMoonPhases[key] = '🌕︎';
                }

                // Third Quarter
                const thirdQuarterDate = parseMoonPhaseDate(monthData.third_quarter, year);
                if (thirdQuarterDate) {
                    const key = `${thirdQuarterDate.getFullYear()}-${(thirdQuarterDate.getMonth() + 1).toString().padStart(2, '0')}-${thirdQuarterDate.getDate().toString().padStart(2, '0')}`;
                    hardcodedMoonPhases[key] = '🌗︎';
                }
            });
        };

        // Попълване на данните за 2025 и 2026 г.
        populateMoonPhases(moonData2025, 2025);
        populateMoonPhases(moonData2026, 2026);


        // Функция за получаване на символа за фазата на луната от хардкоднатите данни
        const getMoonPhaseSymbol = (gregorianDate) => {
            const year = gregorianDate.getFullYear();
            const month = (gregorianDate.getMonth() + 1).toString().padStart(2, '0'); // +1 защото месеците са 0-индексирани
            const day = gregorianDate.getDate().toString().padStart(2, '0');
            const dateKey = `${year}-${month}-${day}`;

            return hardcodedMoonPhases[dateKey] || ''; // Връща символа или празен низ, ако няма фаза за датата
        };

        // Дефиниция на основните ислямски свещени дни и нощи за 1446 г. по Хиджра
        // Информацията е базирана на общоприети дати и може да варира леко
        // в зависимост от конкретното наблюдение на луната и региона.
        const sacredDaysAndNights = [
            // Реджеб (7-ми месец)
            { month: 7, day: 1, name: "Регаиб Кандиль" }, // Първият четвъртък вечер на Реджеб
            { month: 7, day: 27, name: "Мирадж Кандиль" }, // 27-ми Реджеб
            // Шабан (8-ми месец)
            { month: 8, day: 15, name: "Берат Кандиль" }, // 15-ти Шабан
            // Рамазан (9-ти месец)
            { month: 9, day: 27, name: "Кадир Геджеси" }, // 27-ми Рамазан (нощта на Кадир)
            // Шеввал (10-ти месец)
            { month: 10, day: 1, name: "Рамазан Байрам (1-ви ден)" }, // 1-ви Шеввал
            { month: 10, day: 2, name: "Рамазан Байрам (2-ри ден)" }, // 2-ри Шеввал
            { month: 10, day: 3, name: "Рамазан Байрам (3-ти ден)" }, // 3-ти Шеввал
            // Зилхидже (12-ти месец)
            { month: 12, day: 9, name: "Денят Арафа" }, // 9-ти Зилхидже
            { month: 12, day: 10, name: "Курбан Байрам (1-ви ден)" }, // 10-ти Зилхидже
            { month: 12, day: 11, name: "Курбан Байрам (2-ри ден)" }, // 11-ти Зилхидже
            { month: 12, day: 12, name: "Курбан Байрам (3-ти ден)" }, // 12-ти Зилхидже
            { month: 12, day: 13, name: "Курбан Байрам (4-ти ден)" }  // 13-ти Зилхидже
        ];


        const App = () => {
            const { useState, useCallback } = React;
            const today = new Date();
            const currentGregorianYear = today.getFullYear();

            // Задаваме начална хиджри година и месец въз основа на потребителската корекция
            const initialHijriYear = 1446;
            const initialHijriMonth = 12; // Зилхидже

            const [selectedHijriYear, setSelectedHijriYear] = useState(initialHijriYear);
            const [selectedHijriMonth, setSelectedHijriMonth] = useState(initialHijriMonth);
            const [notes, setNotes] = useState({}); // Съхранява бележки: { 'ГГГГ-ММ-ДД_Х': 'текст на бележка' }
            const [viewMode, setViewMode] = useState('month'); // 'month' или 'year'

            // Обработка на промяна в текста на бележката
            const handleNoteChange = useCallback((dateKey, text) => {
                setNotes(prevNotes => ({
                    ...prevNotes,
                    [dateKey]: text
                }));
            }, []);

            // Компонент за рендиране на един месец (използва се както за месечен, така и за годишен изглед)
            const renderMonthGrid = (hijriYear, hijriMonth, isYearView = false) => {
                const daysInMonth = getDaysInHijriMonth(hijriYear, hijriMonth);
                const calendarDays = [];

                const firstDayGregorian = hijriToGregorian(hijriYear, hijriMonth, 1);
                const gregorianDayOfWeek = firstDayGregorian.getDay(); // 0 за неделя, 1 за понеделник и т.н.
                // За да започва от неделя, не е нужна корекция: 0 за неделя, 1 за понеделник и т.н.
                const firstDayOfWeekAdjusted = gregorianDayOfWeek; 

                // Добавяне на празни клетки за дните преди 1-ви число на месеца
                for (let i = 0; i < firstDayOfWeekAdjusted; i++) {
                    calendarDays.push(<div key={`empty-${hijriMonth}-${i}`} className="p-2"></div>);
                }

                for (let day = 1; day <= daysInMonth; day++) {
                    const gregorianDate = hijriToGregorian(hijriYear, hijriMonth, day);
                    // Форматиране на григорианската дата като ДД.ММ
                    const dayFormatted = gregorianDate.getDate().toString().padStart(2, '0');
                    const monthFormatted = (gregorianDate.getMonth() + 1).toString().padStart(2, '0');
                    const gregorianDateString = `${dayFormatted}.${monthFormatted}`;
                    
                    const dateKey = `${hijriYear}-${hijriMonth}-${day}`;

                    // Определяне дали денят е петък (ден 5 в JS Date, ако неделя е 0)
                    const isFriday = gregorianDate.getDay() === 5;
                    const cellBgClass = isFriday ? 'bg-green-100' : 'bg-white'; // Зелен фон за петък

                    const moonPhaseSymbol = getMoonPhaseSymbol(gregorianDate); // Вземане на символа за фазата на луната

                    calendarDays.push(
                        <div key={dateKey} className={`p-2 border border-gray-300 rounded-lg shadow-sm flex flex-col ${cellBgClass} hover:shadow-md transition-shadow duration-200`}>
                            {/* Хиджри ден и лунен символ (условно рендиране) */}
                            {isYearView ? (
                                <>
                                    <div className="font-semibold text-2xl text-indigo-700 text-center"> {/* Увеличен размер на хиджри деня */}
                                        <span>{day}</span>
                                    </div>
                                    <div className={`text-gray-600 mb-1 text-base text-center`}> {/* Увеличен размер на григорианската дата */}
                                        {gregorianDateString}
                                    </div>
                                    {moonPhaseSymbol && <div className="text-xs text-center mt-1">{moonPhaseSymbol}</div>} {/* Намален размер на символа на луната, под датите */}
                                </>
                            ) : (
                                <>
                                    <div className="flex justify-between items-center font-semibold text-2xl text-indigo-700"> {/* Увеличен размер на хиджри деня */}
                                        <span>{day}</span>
                                        {moonPhaseSymbol && <span className="text-xs">{moonPhaseSymbol}</span>} {/* Намален размер на символа на луната */}
                                    </div>
                                    <div className={`text-gray-600 mb-1 text-base`}> {/* Увеличен размер на григорианската дата */}
                                        {gregorianDateString}
                                    </div>
                                </>
                            )}
                            
                            {/* Полетата за писане се показват само ако не е годишен изглед */}
                            {!isYearView && (
                                <textarea
                                    className="w-full h-16 p-1 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-500 resize-y text-xs"
                                    value={notes[dateKey] || ''}
                                    onChange={(e) => handleNoteChange(dateKey, e.target.value)}
                                ></textarea>
                            )}
                        </div>
                    );
                }

                // Филтриране на празниците за текущия месец
                const holidaysInMonth = sacredDaysAndNights.filter(
                    holiday => holiday.month === hijriMonth
                );

                return (
                    <div className="mb-8"> {/* Отстояние между месеците в годишен изглед */}
                        {!isYearView && ( // Показва името на месеца и годината само в месечен изглед
                            <div className="text-2xl font-bold text-indigo-800 text-center mb-4">
                                {hijriMonths[hijriMonth - 1].toUpperCase()} {hijriYear} г.
                            </div>
                        )}
                        {isYearView && ( // Показва името на месеца и годината за всеки месец в годишен изглед
                            <h3 className="text-xl font-semibold text-indigo-700 text-center mb-2">
                                {hijriMonths[hijriMonth - 1]} {hijriYear} г.
                            </h3>
                        )}
                        <div className="grid grid-cols-7 gap-2 text-center font-bold text-gray-700 text-sm mb-2"> {/* Намален размер на шрифта за заглавията на дните */}
                            <div>Нд</div>
                            <div>Пн</div>
                            <div>Вт</div>
                            <div>Ср</div>
                            <div>Чт</div>
                            <div>Пт</div>
                            <div>Сб</div>
                        </div>
                        <div className="grid grid-cols-7 gap-2">
                            {calendarDays}
                        </div>
                        {/* Показване на празниците под цялата мрежа на месеца (и в месечен, и в годишен изглед) */}
                        {holidaysInMonth.length > 0 && (
                            <div className="text-center text-sm text-gray-700 mt-4"> {/* Добавено mt-4 за отстояние */}
                                {holidaysInMonth.map((holiday, idx) => (
                                    <p key={idx} className="text-indigo-600 font-medium">
                                        {holiday.name} ({holiday.day} {hijriMonths[holiday.month - 1]})
                                    </p>
                                ))}
                            </div>
                        )}
                    </div>
                );
            };

            // Преминаване към предишен месец
            const handlePrevMonth = () => {
                setSelectedHijriMonth(prevMonth => {
                    if (prevMonth === 1) {
                        setSelectedHijriYear(prevYear => prevYear - 1);
                        return 12;
                    }
                    return prevMonth - 1;
                });
            };

            // Преминаване към следващ месец
            const handleNextMonth = () => {
                setSelectedHijriMonth(prevMonth => {
                    if (prevMonth === 12) {
                        setSelectedHijriYear(prevYear => prevYear + 1);
                        return 1;
                    }
                    return prevMonth + 1;
                });
            };

            // Нова функция за преминаване към предишна година
            const handlePrevYear = () => {
                setSelectedHijriYear(prevYear => prevYear - 1);
            };

            // Нова функция за преминаване към следваща година
            const handleNextYear = () => {
                setSelectedHijriYear(prevYear => prevYear + 1);
            };

            // Функция за сваляне на скрийншот
            const handleDownloadScreenshot = () => {
                const calendarElement = document.getElementById('calendar-container'); // ID на елемента, който ще се снима
                if (calendarElement) {
                    html2canvas(calendarElement, {
                        useCORS: true, // Важно за зареждане на външни ресурси, ако има такива
                        scale: 2 // Увеличава резолюцията на скрийншота
                    }).then(canvas => {
                        const link = document.createElement('a');
                        link.download = `hijri-calendar-${viewMode}-screenshot.png`;
                        link.href = canvas.toDataURL('image/png');
                        document.body.appendChild(link);
                        link.click();
                        document.body.removeChild(link);
                    }).catch(err => {
                        console.error("Грешка при генериране на скрийншот:", err);
                        // Можете да добавите съобщение за грешка на потребителя тук
                    });
                }
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-indigo-100 to-purple-100 p-6 font-sans antialiased">
                    <div id="calendar-container" className="max-w-full mx-auto bg-white rounded-xl shadow-2xl p-8">
                        <h1 className="text-3xl font-extrabold text-center text-indigo-800 mb-6">
                            Хиджра Календар Органайзър
                        </h1>

                        {/* Навигация за месец/година и превключване на изгледа */}
                        <div className="flex flex-col sm:flex-row justify-between items-center mb-8 p-4 bg-indigo-50 rounded-lg shadow-inner">
                            {viewMode === 'month' ? (
                                <div className="flex space-x-2 mb-4 sm:mb-0">
                                    <button
                                        onClick={handlePrevMonth}
                                        className="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-full shadow-lg transition-all duration-300 transform hover:scale-105"
                                    >
                                        Предишен Месец
                                    </button>
                                    <button
                                        onClick={handleNextMonth}
                                        className="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-full shadow-lg transition-all duration-300 transform hover:scale-105"
                                    >
                                        Следващ Месец
                                    </button>
                                </div>
                            ) : (
                                <div className="flex space-x-2 mb-4 sm:mb-0">
                                    <button
                                        onClick={handlePrevYear}
                                        className="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-full shadow-lg transition-all duration-300 transform hover:scale-105"
                                    >
                                        Предишна Година
                                    </button>
                                    <button
                                        onClick={handleNextYear}
                                        className="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-full shadow-lg transition-all duration-300 transform hover:scale-105"
                                    >
                                        Следваща Година
                                    </button>
                                </div>
                            )}

                            <div className="flex items-center space-x-4 mb-4 sm:mb-0">
                                <select
                                    className="p-3 border border-indigo-300 rounded-lg bg-white text-indigo-800 text-lg font-medium focus:outline-none focus:ring-2 focus:ring-indigo-500"
                                    value={selectedHijriMonth}
                                    onChange={(e) => setSelectedHijriMonth(parseInt(e.target.value))}
                                    disabled={viewMode === 'year'} // Деактивира се в годишен изглед
                                >
                                    {hijriMonths.map((month, index) => (
                                        <option key={index} value={index + 1}>
                                            {month}
                                        </option>
                                    ))}
                                </select>
                                <input
                                    type="number"
                                    className="p-3 border border-indigo-300 rounded-lg bg-white text-indigo-800 text-lg font-medium w-32 text-center focus:outline-none focus:ring-2 focus:ring-indigo-500"
                                    value={selectedHijriYear}
                                    onChange={(e) => setSelectedHijriYear(parseInt(e.target.value))}
                                    min="1300"
                                    max="1500"
                                />
                            </div>

                            <button
                                onClick={() => setViewMode(viewMode === 'month' ? 'year' : 'month')}
                                className="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-full shadow-lg transition-all duration-300 transform hover:scale-105"
                            >
                                {viewMode === 'month' ? 'Покажи цялата година' : 'Покажи месец'}
                            </button>
                        </div>

                        {/* Календарна мрежа - условно рендиране */}
                        {viewMode === 'month' ? (
                            renderMonthGrid(selectedHijriYear, selectedHijriMonth)
                        ) : (
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-8">
                                {hijriMonths.map((_, index) => (
                                    <div key={`year-month-${index + 1}`} className="bg-gray-50 p-4 rounded-lg shadow-md">
                                        {renderMonthGrid(selectedHijriYear, index + 1, true)}
                                    </div>
                                ))}
                            </div>
                        )}
                    </div>
                    {/* Бутон за сваляне на скрийншот */}
                    <div className="flex justify-center mt-6">
                        <button
                            onClick={handleDownloadScreenshot}
                            className="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-full shadow-lg transition-all duration-300 transform hover:scale-105 text-lg"
                        >
                            Свали скрийншот на календара
                        </button>
                    </div>
                </div>
            );
        };

        // Рендиране на React приложението в DOM
        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
